<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="admin/home/common-header :: head(~{::title})">
    <title>控制面板</title>
</head>
<link rel="stylesheet" href="/static/admin/my/css/dashboard.css">
<body>
<div class="layuimini-container" id="app" v-cloak>
    <div class="layuimini-main">
        <div class="layuimini-main layui-top-box">
            <div class="layui-row layui-col-space10">
                <div class="layui-col-md3">
                    <div class="col-xs-6 col-md-3">
                        <div class="panel layui-bg-cyan">
                            <div class="panel-body">
                                <div class="panel-title">
                                    <h5>文章统计</h5>
                                </div>
                                <div class="panel-content">
                                    <h1 class="no-margins" v-text="articleCount">0</h1>
                                    <div class="stat-percent font-bold text-gray">
                                        <i class="fa fa-commenting"></i>&nbsp;{{increasedArticles}}
                                    </div>
                                    <small>30天内新增文章</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="layui-col-md3">
                    <div class="col-xs-6 col-md-3">
                        <div class="panel layui-bg-blue">
                            <div class="panel-body">
                                <div class="panel-title">
                                    <h5>浏览统计</h5>
                                </div>
                                <div class="panel-content">
                                    <h1 class="no-margins" v-text="viewCount">0</h1>
                                    <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i>&nbsp;{{increasedViews}}
                                    </div>
                                    <small>30天内新增浏览</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="layui-col-md3">
                    <div class="col-xs-6 col-md-3">
                        <div class="panel layui-bg-green">
                            <div class="panel-body">
                                <div class="panel-title">
                                    <h5>留言统计</h5>
                                </div>
                                <div class="panel-content">
                                    <h1 class="no-margins" id="tag-count" v-text="messageCount">0</h1>
                                    <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i>&nbsp;{{increasedMessages}}
                                    </div>
                                    <small>30天内新增留言</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md3">
                    <div class="col-xs-6 col-md-3">
                        <div class="panel layui-bg-orange">
                            <div class="panel-body">
                                <div class="panel-title">
                                    <h5>评论统计</h5>
                                </div>
                                <div class="panel-content">
                                    <h1 class="no-margins" v-text="commentCount">0</h1>
                                    <div class="stat-percent font-bold text-gray"><i class="fa fa-commenting"></i>&nbsp;{{increasedComments}}
                                    </div>
                                    <small>30天内新增评论</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md8">
                <div class="layui-row layui-col-space15">
                    <div class="layui-col-md6">
                        <div class="layui-card">
                            <div class="layui-card-header"><i class="fa fa-list-alt icon"></i>数据统计</div>
                            <div class="layui-card-body">
                                <div class="welcome-module">
                                    <div class="layui-row layui-col-space10">
                                        <div class="layui-col-xs6">
                                            <div class="panel layui-bg-number">
                                                <div class="panel-body">
                                                    <div class="panel-title">
                                                        <h5>用户统计</h5>
                                                    </div>
                                                    <div class="panel-content">
                                                        <h1 class="no-margins" v-text="userCount">0</h1>
                                                        <small>当前分类总记录数</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-xs6">
                                            <div class="panel layui-bg-number">
                                                <div class="panel-body">
                                                    <div class="panel-title">
                                                        <h5>访客统计</h5>
                                                    </div>
                                                    <div class="panel-content">
                                                        <h1 class="no-margins" v-text="visitorCount">0</h1>
                                                        <small>当前分类总记录数</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-xs6">
                                            <div class="panel layui-bg-number">
                                                <div class="panel-body">
                                                    <div class="panel-title">
                                                        <h5>分类统计</h5>
                                                    </div>
                                                    <div class="panel-content">
                                                        <h1 class="no-margins" v-text="categoryCount">0</h1>
                                                        <small>当前分类总记录数</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layui-col-xs6">
                                            <div class="panel layui-bg-number">
                                                <div class="panel-body">
                                                    <div class="panel-title">
                                                        <h5>标签统计</h5>
                                                    </div>
                                                    <div class="panel-content">
                                                        <h1 class="no-margins" v-text="tagCount">0</h1>
                                                        <small>当前分类总记录数</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md6">
                        <div class="layui-card">
                            <div class="layui-card-header"><i class="fa fa-credit-card icon icon-blue"></i>快捷入口</div>
                            <div class="layui-card-body">
                                <div class="welcome-module">
                                    <div class="layui-row layui-col-space10 layuimini-qiuck">
                                        <div class="layui-col-xs3 layuimini-qiuck-module" permission="blog:article:add">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/article/article-add"
                                               data-title="文章发布" data-icon="fa fa-pencil-square-o">
                                                <i class="fa fa-pencil-square-o"></i>
                                                <cite>文章发布</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="blog:article:query">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/article/article-list"
                                               data-title="文章管理" data-icon="fa fa-file-text">
                                                <i class="fa fa-file-text"></i>
                                                <cite>文章管理</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="blog:comment:query">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/comment/comment-list"
                                               data-title="评论管理" data-icon="fa fa-comments">
                                                <i class="fa fa-comments"></i>
                                                <cite>评论管理</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="blog:message:query">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/message/message-list"
                                               data-title="留言管理" data-icon="fa fa-comment">
                                                <i class="fa fa-comment"></i>
                                                <cite>留言管理</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module" permission="sys:user:query">
                                            <a href="javascript:;" layuimini-content-href="/admin/page/user/user-list"
                                               data-title="用户管理" data-icon="fa fa-users">
                                                <i class="fa fa-users"></i>
                                                <cite>用户管理</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="sys:accesslog:query">
                                            <a href="javascript:;" layuimini-content-href="/admin/page/log/access-log"
                                               data-title="访问日志" data-icon="fa fa-eye">
                                                <i class="fa fa-eye"></i>
                                                <cite>访问日志</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="sys:operationlog:query">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/log/operation-log"
                                               data-title="操作日志" data-icon="fa fa-gears">
                                                <i class="fa fa-gears"></i>
                                                <cite>操作日志</cite>
                                            </a>
                                        </div>
                                        <div class="layui-col-xs3 layuimini-qiuck-module"
                                             permission="blog:link:query">
                                            <a href="javascript:;"
                                               layuimini-content-href="/admin/page/link/link-list"
                                               data-title="友链管理" data-icon="fa fa-unlink">
                                                <i class="fa fa-unlink"></i>
                                                <cite>友链管理</cite>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-box">
                            <div class="layui-row layui-col-space10">
                                <div class="layui-tab layui-tab-brief">
                                    <ul class="layui-tab-title">
                                        <li class="layui-this" permission="sys:accesslog:query">访问日志</li>
                                        <li permission="sys:operationlog:query">操作日志</li>
                                        <li permission="blog:comment:query">最新评论</li>
                                        <li permission="blog:message:query">最新留言</li>
                                    </ul>
                                    <div class="layui-tab-content">
                                        <div class="layui-tab-item layui-show">
                                            <table class="layui-table" permission="sys:accesslog:query">
                                                <colgroup>
                                                    <col width="150">
                                                    <col width="100">
                                                    <col width="100">
                                                    <col width="200">
                                                    <col width="100">
                                                </colgroup>
                                                <thead>
                                                <tr>
                                                    <th style="text-align: center">IP</th>
                                                    <th style="text-align: center">IP来源</th>
                                                    <th style="text-align: center">时间</th>
                                                    <th style="text-align: center">描述</th>
                                                    <th style="text-align: center">访问状态</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr v-for="(log, index) in accessLogs" :key="log.id">
                                                    <td class="align-center" v-text="log.requestIp">IP</td>
                                                    <td class="align-center" v-text="log.address">IP来源</td>
                                                    <td class="align-center">{{log.createTime | dateFormat}}</td>
                                                    <td class="align-center" v-text="log.description">描述</td>
                                                    <td class="align-center"><span class="layui-badge"
                                                                                   :class="setLogClass(log.status)"
                                                                                   v-text="log.status==1 ? '成功':'失败'">访问状态</span>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="layui-tab-item">
                                            <div class="layui-tab-item layui-show">
                                                <table class="layui-table" permission="sys:operationlog:query">
                                                    <colgroup>
                                                        <col width="150">
                                                        <col width="100">
                                                        <col width="100">
                                                        <col width="100">
                                                        <col width="200">
                                                        <col width="100">
                                                    </colgroup>
                                                    <thead>
                                                    <tr>
                                                        <th style="text-align: center">IP</th>
                                                        <th style="text-align: center">IP来源</th>
                                                        <th style="text-align: center">时间</th>
                                                        <th style="text-align: center">操作人员</th>
                                                        <th style="text-align: center">描述</th>
                                                        <th style="text-align: center">访问状态</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr v-for="(log, index) in operationLogs" :key="log.id">
                                                        <td class="align-center" v-text="log.requestIp">IP</td>
                                                        <td class="align-center" v-text="log.address">IP来源</td>
                                                        <td class="align-center">{{log.createTime | dateFormat}}</td>
                                                        <td class="align-center" v-text="log.username">操作人员</td>
                                                        <td class="align-center" v-text="log.description">描述</td>
                                                        <td class="align-center"><span class="layui-badge"
                                                                                       :class="setLogClass(log.status)"
                                                                                       v-text="log.status==1 ? '成功':'失败'">访问状态</span>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="layui-tab-item">
                                            <div class="layui-tab-item layui-show">
                                                <table class="layui-table" permission="blog:comment:query">
                                                    <colgroup>
                                                        <col width="100">
                                                        <col width="200">
                                                        <col width="100">
                                                        <col width="100">
                                                    </colgroup>
                                                    <thead>
                                                    <tr>
                                                        <th style="text-align: center">昵称</th>
                                                        <th style="text-align: center">内容</th>
                                                        <th style="text-align: center">时间</th>
                                                        <th style="text-align: center">文章链接</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr v-for="(comment, index) in comments" :key="comment.id">
                                                        <td class="align-center" v-text="comment.nickname">昵称
                                                        </td>
                                                        <td class="align-center" v-text="comment.content">内容</td>
                                                        <td class="align-center">{{comment.createTime | dateFormat}}
                                                        </td>
                                                        <td class="align-center"><a
                                                                :href="'/article/'+comment.articleId"
                                                                v-text="'/article/'+comment.articleId"
                                                                style="color: #01AAED"
                                                                target="_blank">文章链接</a>
                                                        </td>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="layui-tab-item">
                                            <div class="layui-tab-item layui-show">
                                                <table class="layui-table" permission="blog:message:query">
                                                    <colgroup>
                                                        <col width="100">
                                                        <col width="200">
                                                        <col width="100">
                                                    </colgroup>
                                                    <thead>
                                                    <tr>
                                                        <th style="text-align: center">昵称</th>
                                                        <th style="text-align: center">内容</th>
                                                        <th style="text-align: center">时间</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr v-for="(message, index) in messages" :key="message.id">
                                                        <td class="align-center" v-text="message.nickname">昵称
                                                        </td>
                                                        <td class="align-center" v-text="message.content">内容</td>
                                                        <td class="align-center">{{message.createTime | dateFormat}}
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-card">
                            <div class="layui-card-header"><i class="fa fa-line-chart icon"></i>报表统计</div>
                            <div class="layui-card-body">
                                <div id="echarts-records" style="width: 100%;min-height:500px"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-col-md4">
                <div class="layui-card" permission="sys:notice:query">
                    <div class="layui-card-header"><i class="fa fa-bullhorn icon icon-tip"></i>系统公告</div>
                    <div class="layui-card-body layui-text">
                        <div class="layuimini-notice" v-for="(notice, index) in notices" :key="notice.id">
                            <div class="layuimini-notice-title">{{notice.title}}</div>
                            <div class="layuimini-notice-extra">{{notice.createTime}}</div>
                            <div class="layuimini-notice-content layui-hide">
                                {{notice.content}}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-card" permission="blog:article:query">
                    <div class="layui-card-header"><i class="fa fa-book icon icon-cray"></i>最新文章</div>
                    <div class="layui-card-body">
                        <ul class="layui-timeline">
                            <li class="layui-timeline-item" v-for="(article, index) in articles" :key="article.id">
                                <i class="layui-icon layui-timeline-axis">&#xe63f;</i>
                                <div class="layui-timeline-content layui-text">
                                    <h3 class="layui-timeline-title">{{toLocaleDate(article.createTime)}}</h3>
                                    <p>
                                        <a :href="'/article/'+article.id" target="_blank">{{article.title}}</a></br>
                                        {{article.summary}}
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/static/admin/layuimini/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<script src="/static/admin/layuimini/js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script src="/static/admin/layuimini/lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
<script src="/static/admin/my/js/my.js" charset="utf-8"></script>
<script type="text/javascript" src="/static/front/js/vue.js"></script>
<script src="/static/admin/my/js/axios-0.19.2.js"></script>
<script src="/static/front/js/page/moment.js"></script>
<!--时间汉化-->
<script type="text/javascript" src="/static/front/js/page/time-zn.js"></script>
<script src="/static/admin/my/js/home/dashboard.js"></script>
</body>
</html>
